#!/bin/bash

# base url for bible references
url="http://www.biblegateway.com/passage/?version=ESV&interface=print&search="
# allow environment overrides
if [ ! -z $BIBLIO_URL ]; then
    url=$BIBLIO_URL
fi

# generate a bibliography from a .md link reference
# insert it into the bottom of the page

if [ -z $1 ]; then
    echo "File not specified"
    exit 255
fi

if [ ! -f $1 ]; then
    echo "File not found"
fi

sources=$(grep $1 -e "\[[^0-9\r\n]")
if [ -z $sources ]; then
    echo "No sources"
    exit 0
fi

# truncate the tmp file
>> /tmp/bibliography

# build up the bibliography
for source in $sources; do
    echo $source
done



# TODO: mix in the references
exit
references=$(grep $1 -e "^\[[0-9]")

